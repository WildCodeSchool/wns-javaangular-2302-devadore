<div class="user-list">
  <div
    class="mx-auto flex flex-col items-center justify-center px-6 py-8 md:h-screen lg:py-0"
  >
    <a
      href="#"
      class="mb-6 flex items-center text-2xl font-semibold text-gray-900 dark:text-black"
    >
      <img
        class="mr-2 h-8 w-8"
        src="../../../assets/images/defaultAvatars/LOGO-QUIZ-FOR-ALL.png"
        alt="logo"
      />
      Quizz4all
    </a>
    <mat-form-field>
      <input matInput (keyup)="applyFilter($event)" placeholder="Filter" />
    </mat-form-field>

    <table mat-table [dataSource]="users" class="mat-elevation-z8">
      <caption>
        Liste des utilisateurs
      </caption>
      <ng-container matColumnDef="avatar">
        <th mat-header-cell *matHeaderCellDef>Avatar</th>
        <td mat-cell *matCellDef="let user">
          <img
            *ngIf="user.image"
            [src]="'data:' + user.mimeType + ';base64,' + user.image"
            alt="Avatar"
          />
        </td>
      </ng-container>
      <ng-container matColumnDef="createdAt">
        <th mat-header-cell *matHeaderCellDef>Créer le</th>
        <td mat-cell *matCellDef="let user">{{ user.createdAt | date }}</td>
      </ng-container>
      <ng-container matColumnDef="updatedAt">
        <th mat-header-cell *matHeaderCellDef>Mis à jour le</th>
        <td mat-cell *matCellDef="let user">{{ user.updatedAt | date }}</td>
      </ng-container>

      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef>ID</th>
        <td mat-cell *matCellDef="let user">{{ user.id }}</td>
      </ng-container>

      <ng-container matColumnDef="username">
        <th mat-header-cell *matHeaderCellDef>UserName</th>
        <td mat-cell *matCellDef="let user">{{ user.username }}</td>
      </ng-container>

      <ng-container matColumnDef="email">
        <th mat-header-cell *matHeaderCellDef>Email</th>
        <td mat-cell *matCellDef="let user">{{ user.email }}</td>
      </ng-container>

      <ng-container matColumnDef="roles">
        <th mat-header-cell *matHeaderCellDef>Rôle</th>
        <td mat-cell *matCellDef="let user">
          <ul>
            <li *ngFor="let role of user.roles">{{ role.name }}</li>
          </ul>
        </td>
      </ng-container>

      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>Actions</th>
        <td mat-cell *matCellDef="let user">
          <button
            class="m-2 mt-4 rounded-full border-2 border-white px-11 py-2 text-lg"
            (click)="deleteUser(user.id)"
          >
            Supprimer
          </button>
          <button
            class="mt-4 rounded-full border-2 border-white px-11 py-2 text-lg"
            (click)="editUser(user.id)"
          >
            Edit
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
  </div>
</div>
