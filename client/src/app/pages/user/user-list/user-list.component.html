<div class="user-list bg-black rounded-lg shadow-lg p-8">
  <div class="fixed top-0 left-0 z-50">
    <div *ngFor="let toast of toastService.toasts"
         class="mb-2 p-4 rounded shadow-lg"
         [ngClass]="{
          'bg-green-500 text-white': toast.type === 'success',
          'bg-red-500 text-white': toast.type === 'error'
       }">
      {{ toast.message }}
    </div>
  </div>
  <div
    class="mx-auto flex flex-col items-center justify-center px-6 py-8 "
  >
    <a href="#"
       (click)="goToHome()"
       class="mb-6 flex items-center text-2xl font-semibold text-gray-900 dark:text-amber-100"
    >
      <img class="w-8 h-8 mr-2" ngSrc="../../../assets/images/defaultAvatars/LOGO-QUIZ-FOR-ALL.png" alt="logo"
           width="24" height="24">
      Quizz4all
    </a>
    <mat-form-field>
      <input matInput (keyup)="applyFilter($event)" placeholder="Filter"/>
    </mat-form-field>

    <table mat-table [dataSource]="users" class="mat-elevation-z8">
      <caption class="text-lg font-bold bg-yellow-300 p-2 rounded-t">
        Liste des utilisateurs
      </caption>
      <ng-container matColumnDef="avatar">
        <th mat-header-cell *matHeaderCellDef>Avatar</th>
        <td mat-cell *matCellDef="let user">
          <img class="rounded-full shadow h-12 w-12 m-auto"
               *ngIf="user.image"
               [src]="'data:' + user.mimeType + ';base64,' + user.image"
               alt="Avatar"
          />
        </td>
      </ng-container>
      <ng-container matColumnDef="createdAt">
        <th mat-header-cell *matHeaderCellDef>Créer le</th>
        <td mat-cell *matCellDef="let user">{{ user.createdAt | date }}</td>
      </ng-container>
      <ng-container matColumnDef="updatedAt">
        <th mat-header-cell *matHeaderCellDef>Mis à jour le</th>
        <td mat-cell *matCellDef="let user">{{ user.updatedAt | date }}</td>
      </ng-container>

      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef>ID</th>
        <td mat-cell *matCellDef="let user">{{ user.id }}</td>
      </ng-container>

      <ng-container matColumnDef="username">
        <th mat-header-cell *matHeaderCellDef>UserName</th>
        <td mat-cell *matCellDef="let user">{{ user.username }}</td>
      </ng-container>

      <ng-container matColumnDef="email">
        <th mat-header-cell *matHeaderCellDef>Email</th>
        <td mat-cell *matCellDef="let user">{{ user.email }}</td>
      </ng-container>

      <ng-container matColumnDef="roles">
        <th mat-header-cell *matHeaderCellDef>Rôle</th>
        <td mat-cell *matCellDef="let user">
          <ul>
            <li *ngFor="let role of user.roles">{{ role.name }}</li>
          </ul>
        </td>
      </ng-container>

      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>Actions</th>
        <td mat-cell *matCellDef="let user">
          <button
            class="m-2 bg-red-500 hover:bg-red-600 text-white rounded-full px-4 py-2 shadow-md transform transition-transform duration-200 hover:scale-105"
            (click)="deleteUser(user.id)"
          >
            Supprimer
          </button>
          <button
            class="m-2 bg-green-500 hover:bg-green-600 text-white rounded-full px-4 py-2 shadow-md transform transition-transform duration-200 hover:scale-105"
            (click)="editUser(user.id)"
          >
            Edit
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
  </div>
</div>
