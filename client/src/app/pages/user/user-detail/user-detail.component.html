<div class="flex min-h-screen items-center justify-center">
  <div class="fixed top-0 left-0 z-50">
    <div *ngFor="let toast of toastService.toasts"
         class="mb-2 p-4 rounded shadow-lg"
         [ngClass]="{
          'bg-green-500 text-white': toast.type === 'success',
          'bg-red-500 text-white': toast.type === 'error'
       }">
      {{ toast.message }}
    </div>
  </div>
  <div
    class="mx-auto flex h-full flex-col items-center justify-center px-6 py-8 md:h-screen lg:py-0"
  >
    <a
      href="#"
      class="mb-6 flex items-center text-2xl font-semibold text-gray-900 dark:text-black"
    >
      <img
        class="mr-2 h-8 w-8"
        src="../../../assets/images/defaultAvatars/LOGO-QUIZ-FOR-ALL.png"
        alt="logo"
      />
      Quizz4all
    </a>
    <div class="flex w-full max-w-3xl rounded-lg bg-white p-6 shadow">
      <div class="w-1/2 border-r pr-4">
        <form
          (ngSubmit)="updateUser()"
          class="flex h-full flex-col justify-between space-y-4"
          enctype="multipart/form-data"
        >
          <div>
            <h2 class="mb-4 text-2xl font-bold">Mise à jour du profil</h2>
            <div class="mb-4">
              <label for="username" class="mb-2 block"
              >Nom d'utilisateur :</label
              >
              <input
                [(ngModel)]="user.username"
                id="username"
                name="username"
                required
                class="focus:ring-primary-600 focus:border-primary-600 block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-gray-900 sm:text-sm"
              />
            </div>
            <div class="mb-4">
              <label for="email" class="mb-2 block">Email :</label>
              <input
                [(ngModel)]="user.email"
                id="email"
                name="email"
                type="email"
                required
                class="focus:ring-primary-600 focus:border-primary-600 block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-gray-900 sm:text-sm"
              />
            </div>
            <div class="mb-4">
              <label for="password" class="mb-2 block" style="display: none"
              >Password :</label
              >
              <input
                [(ngModel)]="user.password"
                id="password"
                name="password"
                type="password"
                required
                class="focus:ring-primary-600 focus:border-primary-600 block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-gray-900 sm:text-sm"
                style="display: none"
              />
            </div>
            <div *ngFor="let role of allRoles; let i = index" class="mb-2">
              <label class="flex items-center">
                <input
                  type="checkbox"
                  [checked]="isRoleSelected(role)"
                  (change)="toggleRoleSelection(role)"
                  [id]="'role-' + i"
                  class="form-checkbox h-4 w-4 text-amber-800 transition duration-150 ease-in-out"
                />
                <span class="ml-2 text-sm">{{ role.name }}</span>
              </label>
            </div>
          </div>
          <button
            type="submit"
            class="mt-4 w-full rounded-lg border-2 border-b-black px-5 py-2.5 font-medium text-current"
          >
            Mettre à jour le profil
          </button>
        </form>
      </div>
      <div class="ml-6 w-1/2">
        <form
          (ngSubmit)="updateUser()"
          class="flex h-full flex-col justify-between space-y-4"
          enctype="multipart/form-data"
        >
          <div>
            <h2 class="mb-4 text-2xl font-bold">Mise à jour de l'image</h2>
            <div class="mb-4">
              <img
                *ngIf="user.image"
                [src]="'data:' + user.mimeType + ';base64,' + user.image"
                alt="Avatar"
                width="100"
              />
              <img
                *ngIf="previewUrl"
                [src]="previewUrl"
                alt="Image preview"
                width="100"
              />
            </div>
            <div class="mb-4">
              <label for="image" class="mb-2 block">Image</label>
              <input
                type="file"
                id="image"
                name="image"
                (change)="onImageSelected($event)"
                class="bg-gray-50 text-gray-700"
              />
            </div>
          </div>
          <button
            type="submit"
            class="mt-4 w-full rounded-lg border-2 border-b-black px-5 py-2.5 font-medium text-current"
          >
            Mettre à jour l'image
          </button>
        </form>
      </div>
    </div>
    <button
      (click)="deleteUser(user.id)"
      class="mt-4 rounded-full border-2 border-b-red-700 px-4 py-2 text-current"
    >
      Supprimer le profil
    </button>
  </div>

</div>

