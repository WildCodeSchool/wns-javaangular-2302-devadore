<div class="flex justify-center items-center">
  <form [formGroup]="quizForm" (ngSubmit)="onSubmit()"
        class="bg-gray-900 text-gray-200 p-8 border-2 border-yellow-500 rounded w-2/3 mx-auto">
    <h1 class="text-2xl font-bold mb-6 text-center">Créer ton quiz {{user?.username}} </h1>
    <div class="flex justify-center ">
      <div *ngIf="userImage" class="w-16 h-16 rounded-full overflow-hidden">
        <img [src]="userImage" alt="User Image" class="w-full h-full rounded-full border-4 border-amber-500">
      </div>
    </div>
    <!-- Dropdown for categories -->
    <div class="mb-4">
      <label for="category" class="block mb-2">Category</label>
      <select id="category" formControlName="categoryId"
              class="w-1/4 bg-gray-800 border-2 border-yellow-500 rounded px-3 py-2">
        <option *ngFor="let category of categories" [value]="category.id">{{category.name}}</option>
      </select>
      <!--      <div class="text-red-500 text-sm mt-1"
                 *ngIf="quizForm.get('category')?.invalid && (quizForm.get('category')?.dirty || quizForm.get('category')?.touched)">
              <div *ngIf="quizForm.get('category')?.errors?.['required']">La catégorie est requise</div>
            </div>-->
    </div>

    <!-- Other fields -->
    <label class="block mb-2">Titre du quiz</label>
    <div class="mb-4">
      <input type="text" placeholder="Title" formControlName="title"
             class="w-1/2 bg-gray-800 border-2 border-yellow-500 rounded px-3 py-2">
    </div>
    <label class="block mb-2">Description du thème</label>
    <div class="mb-4">
      <textarea type="text" placeholder="Description" formControlName="description"
                class="w-full bg-gray-800 border-2 border-yellow-500 rounded px-3 py-2"></textarea>
    </div>
    <div formArrayName="questions">
      <div *ngFor="let questionCtrl of questionsArray.controls; let i = index" [formGroupName]="i" class="mb-4">

        <label class="block mb-2">Question -{{ i + 1 }}</label>
        <input type="text" placeholder="Texte de la question" formControlName="text"
               class="w-3/4 bg-gray-800 border-2 border-amber-700 rounded px-3 py-2 mb-3">
        <button type="button" (click)="removeQuestion(i)"
                class="bg-transparent text-gray-200 px-2 py-1 rounded border-2 border-gray-900"
                title="Supprimer la question">❌
        </button>
        <label class="block mb-2">Réponses (cocher la bonne réponses)</label>
        <div formArrayName="answers">
          <div *ngFor="let answerCtrl of getAnswersArray(questionCtrl); let j = index" [formGroupName]="j"
               class="mb-2 flex items-center">
            <input type="text" placeholder="Texte de la réponse" formControlName="text"
                   class="flex-1 bg-gray-800 border-2 border-b-sky-600 rounded px-3 py-2 mr-3">
            <input type="checkbox" formControlName="correct" class="mr-2" title="Correct ?">
            <button type="button" (click)="removeAnswer(i, j)"
                    class="bg-transparent text-gray-200 px-3 py-2 rounded border-2 border-gray-900"
                    title="Supprimer la réponse">❌
            </button>
          </div>
          <button type="button" (click)="addAnswer(i)"
                  class="bg-yellow-500 text-gray-900 px-3 py-2 rounded border-2 border-gray-900">Ajouter une autre
            réponse
          </button>
        </div>

      </div>
      <button type="button" (click)="addQuestion()"
              class="bg-yellow-500 text-gray-900 px-3 py-2 rounded border-2 border-gray-900 mb-4">Ajouter une autre
        question
      </button>
    </div>

    <button type="submit"
            class="bg-yellow-500 text-gray-900 px-4 py-2 rounded border-2 border-gray-900 hover:bg-yellow-600">
      Créer un quiz
    </button>

  </form>
</div>

